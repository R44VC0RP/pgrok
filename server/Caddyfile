{
	# On-demand TLS: provision certs via HTTP-01 as requests arrive
	# The "ask" endpoint prevents abuse — only issues certs for active tunnels
	on_demand_tls {
		ask http://localhost:9123/check
	}
}

# Catch-all HTTPS site — handles any domain pointing to this server
https:// {
	tls {
		on_demand
	}

	# Default response when no tunnel route matches
	respond "No active tunnel on {host}" 502
}
